import{j as e,L as M,l as T,m as d,r as m,A as y,n as C,o as j,p as b,q as w}from"./vendor-VA6rW78p.js";import{u as A,t as f,a as E,M as L}from"./TransactionUtils-klVMbTTX.js";import{f as h,u as $}from"./useSourceSettings--KhdFm90.js";import"./index-lJnYcD2g.js";import"./defineProperty-pzt0HGZs.js";const k=({transaction:a})=>{const c=h(a.amount,!1);return e.jsx(M.Item,{children:e.jsxs(T,{direction:"horizontal",children:[e.jsx("div",{children:a.groupName}),e.jsx("div",{className:"ms-auto",children:c})]})})},B=({transactionList:a})=>e.jsx(M,{variant:"flush",children:a.map((c,s)=>e.jsx(k,{transaction:c},`ec-${s}`))}),g=({title:a,total:c,transactions:s})=>{const o=h(c,!1);return e.jsx(d,{className:"text-center",children:e.jsxs(d.Body,{children:[e.jsx(d.Title,{className:"text-black-50",children:a}),e.jsx(d.Body,{className:"p-1 display-6",children:o}),e.jsx(B,{transactionList:s})]})})},D=({year:a,month:c})=>{const{transactions:s}=A(a,c),{sourceList:o}=$(),r=m.useMemo(()=>{const t=o.filter(n=>!n.isExpense);return f(s,t,"account")},[o,s]),i=m.useMemo(()=>{const t=o.filter(n=>n.isExpense);return f(s,t,"account")},[o,s]),p=m.useMemo(()=>{const t=o.filter(n=>n.isExpense);return f(s,t,"creditCard")},[o,s]),x=m.useMemo(()=>{const t=E(r),n=E(i);return t+n},[i,r]);if(s.length===0)return e.jsx(y,{variant:"warning",children:"Transaction Missing, please upload for the month"});const N=`You have saved ${h(x)} this month`,v=`You have spend ${h(x)} more than you income`;return e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:x>0?"primary":"warning",children:e.jsx("h5",{children:x>0?N:v})}),e.jsxs(C,{className:"row-cols-3",children:[r.map(({title:t,total:n,transactions:l},u)=>e.jsx(j,{children:e.jsx(g,{title:t,total:n,transactions:l})},`income-${u}`)),i.map(({title:t,total:n,transactions:l},u)=>e.jsx(j,{children:e.jsx(g,{title:t,total:n,transactions:l})},`acc-exp-${u}`)),p.map(({title:t,total:n,transactions:l},u)=>e.jsx(j,{children:e.jsx(g,{title:t,total:n,transactions:l})},`card-exp-${u}`))]})]})},[Y,...S]=L,I=()=>{const[a,c]=m.useState(S[0].label.toLowerCase()),{month:s,year:o}=m.useMemo(()=>{const r=new Date;return{month:r.getMonth(),year:r.getFullYear().toString()}},[]);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Monthly Expense Report"}),e.jsx(b,{id:"controlled-tab-example",activeKey:a,onSelect:r=>c(r),className:"mb-3",children:S.map(({label:r,value:i},p)=>e.jsx(w,{eventKey:r.toLowerCase(),title:r,disabled:p>s,mountOnEnter:!0,unmountOnExit:!0,children:e.jsx(D,{month:i,year:o})},i))})]})};export{I as default};
